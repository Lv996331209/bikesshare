<html>
<head>
  <script
    src="//maps.googleapis.com/maps/api/js?key=AIzaSyDJW4jsPlNKgv6jFm3B5Edp5ywgdqLWdmc&language=en&sensor=false&libraries=visualization">
  </script>

  <script>

    function initialize() {

      var mapProp = {
        center: new google.maps.LatLng(55.835, -4.277),
        zoom: 11,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };

      var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);

      var bikes = [{
        Brand: "Pinarello",
        Home_location_lat: "55.83701384660308",
        Home_location_long: "-4.277666330175388",
        ID: 1,
        Insurance_id: "A392"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.94411202924585",
        Home_location_long: "-4.266380206736233",
        ID: 2,
        Insurance_id: "X967"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.84076606852097",
        Home_location_long: "-4.274750901018966",
        ID: 3,
        Insurance_id: "L578"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.85974983691332",
        Home_location_long: "-4.29120010804425",
        ID: 4,
        Insurance_id: "D645"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.86811163659619",
        Home_location_long: "-4.292388235821411",
        ID: 5,
        Insurance_id: "Y241"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.836896988193494",
        Home_location_long: "-4.25876486780991",
        ID: 6,
        Insurance_id: "R642"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.973306524664196",
        Home_location_long: "-4.313116107463011",
        ID: 7,
        Insurance_id: "Q133"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.895346343013166",
        Home_location_long: "-4.326828956646391",
        ID: 8,
        Insurance_id: "C735"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.91979249545348",
        Home_location_long: "-4.262564141611103",
        ID: 9,
        Insurance_id: "J525"
      }, {
        Brand: "GT",
        Home_location_lat: "55.85220322600709",
        Home_location_long: "-4.2820708795520375",
        ID: 10,
        Insurance_id: "F380"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.82719749753542",
        Home_location_long: "-4.323313031534407",
        ID: 11,
        Insurance_id: "D152"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.93767565323114",
        Home_location_long: "-4.253667484725904",
        ID: 12,
        Insurance_id: "C447"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.86396271784419",
        Home_location_long: "-4.303932461613701",
        ID: 13,
        Insurance_id: "O510"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.95802454290243",
        Home_location_long: "-4.264317630930667",
        ID: 14,
        Insurance_id: "H977"
      }, {
        Brand: "BMC",
        Home_location_lat: "55.85299084863128",
        Home_location_long: "-4.303476103698849",
        ID: 15,
        Insurance_id: "V803"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.972180514438264",
        Home_location_long: "-4.26214408377227",
        ID: 16,
        Insurance_id: "L986"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.899539599280125",
        Home_location_long: "-4.2820737962215185",
        ID: 17,
        Insurance_id: "Q901"
      }, {
        Brand: "GT",
        Home_location_lat: "55.91138139187063",
        Home_location_long: "-4.277393952544903",
        ID: 18,
        Insurance_id: "Y364"
      }, {
        Brand: "BMC",
        Home_location_lat: "55.86378828728134",
        Home_location_long: "-4.267197067773596",
        ID: 19,
        Insurance_id: "P247"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.94585979835968",
        Home_location_long: "-4.314053568701472",
        ID: 20,
        Insurance_id: "Y912"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.772854535652066",
        Home_location_long: "-4.281178014450731",
        ID: 21,
        Insurance_id: "X140"
      }, {
        Brand: "BMC",
        Home_location_lat: "55.860982130154234",
        Home_location_long: "-4.293416871537403",
        ID: 22,
        Insurance_id: "B876"
      }, {
        Brand: "BMC",
        Home_location_lat: "55.87559267832164",
        Home_location_long: "-4.334256217416138",
        ID: 23,
        Insurance_id: "M572"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.88816627155074",
        Home_location_long: "-4.277035056046113",
        ID: 24,
        Insurance_id: "A217"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.86194327678425",
        Home_location_long: "-4.227409955283467",
        ID: 25,
        Insurance_id: "D901"
      }, {
        Brand: "BMC",
        Home_location_lat: "55.9531794608946",
        Home_location_long: "-4.30050834257128",
        ID: 26,
        Insurance_id: "J742"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.822230303248695",
        Home_location_long: "-4.229374939946004",
        ID: 27,
        Insurance_id: "D804"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.899336718058706",
        Home_location_long: "-4.312611865726452",
        ID: 28,
        Insurance_id: "J679"
      }, {
        Brand: "GT",
        Home_location_lat: "55.891485682288035",
        Home_location_long: "-4.288413753264637",
        ID: 29,
        Insurance_id: "E615"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.888264324996854",
        Home_location_long: "-4.2931401795522355",
        ID: 30,
        Insurance_id: "B145"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.75048264980521",
        Home_location_long: "-4.273200143365749",
        ID: 31,
        Insurance_id: "K638"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.779510404157264",
        Home_location_long: "-4.215961346094944",
        ID: 32,
        Insurance_id: "Q514"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.81768198060669",
        Home_location_long: "-4.265440931321481",
        ID: 33,
        Insurance_id: "G211"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.8317990289946",
        Home_location_long: "-4.282131762654832",
        ID: 34,
        Insurance_id: "V565"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.94745900419677",
        Home_location_long: "-4.293390023936755",
        ID: 35,
        Insurance_id: "W271"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.86571860712967",
        Home_location_long: "-4.278654546997822",
        ID: 36,
        Insurance_id: "H687"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.87137896410903",
        Home_location_long: "-4.293106625255995",
        ID: 37,
        Insurance_id: "C995"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.82880384468568",
        Home_location_long: "-4.329716807085158",
        ID: 38,
        Insurance_id: "B280"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.809883247396364",
        Home_location_long: "-4.2516315950497034",
        ID: 39,
        Insurance_id: "O995"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.8152309004195",
        Home_location_long: "-4.364685999123287",
        ID: 40,
        Insurance_id: "Q914"
      }, {
        Brand: "BMC",
        Home_location_lat: "55.79758889867091",
        Home_location_long: "-4.32964280512626",
        ID: 41,
        Insurance_id: "Z116"
      }, {
        Brand: "GT",
        Home_location_lat: "55.9442547759375",
        Home_location_long: "-4.335225340018564",
        ID: 42,
        Insurance_id: "Q942"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.77577151110561",
        Home_location_long: "-4.274305973897648",
        ID: 43,
        Insurance_id: "S840"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.77765759430535",
        Home_location_long: "-4.264440571664333",
        ID: 44,
        Insurance_id: "Z474"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.92222726476119",
        Home_location_long: "-4.275006508565876",
        ID: 45,
        Insurance_id: "L862"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.849289870551",
        Home_location_long: "-4.305799487324642",
        ID: 46,
        Insurance_id: "O343"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.97732092134491",
        Home_location_long: "-4.3142588719308375",
        ID: 47,
        Insurance_id: "N451"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.841635355170816",
        Home_location_long: "-4.293203583927561",
        ID: 48,
        Insurance_id: "C634"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.84038130170634",
        Home_location_long: "-4.298798852195425",
        ID: 49,
        Insurance_id: "A679"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.905996130452486",
        Home_location_long: "-4.26026627383194",
        ID: 50,
        Insurance_id: "X247"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.815299730642785",
        Home_location_long: "-4.313441396025039",
        ID: 51,
        Insurance_id: "O642"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.81110856168015",
        Home_location_long: "-4.263004802893583",
        ID: 52,
        Insurance_id: "W217"
      }, {
        Brand: "GT",
        Home_location_lat: "55.92062103176517",
        Home_location_long: "-4.260942585442508",
        ID: 53,
        Insurance_id: "V680"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.84485246972122",
        Home_location_long: "-4.228077491635167",
        ID: 54,
        Insurance_id: "S360"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.85706793433086",
        Home_location_long: "-4.300735178164578",
        ID: 55,
        Insurance_id: "W308"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.83736085997633",
        Home_location_long: "-4.26642700024807",
        ID: 56,
        Insurance_id: "T664"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.801024743862875",
        Home_location_long: "-4.270950289702948",
        ID: 57,
        Insurance_id: "H473"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.85164549550732",
        Home_location_long: "-4.2862022554296955",
        ID: 58,
        Insurance_id: "N418"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.969246331085394",
        Home_location_long: "-4.328972893616791",
        ID: 59,
        Insurance_id: "I590"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.800865074526",
        Home_location_long: "-4.31855893724865",
        ID: 60,
        Insurance_id: "A975"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.932512498634814",
        Home_location_long: "-4.283193618489575",
        ID: 61,
        Insurance_id: "Z116"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.811599139673675",
        Home_location_long: "-4.2962817143587175",
        ID: 62,
        Insurance_id: "X813"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.917597395005984",
        Home_location_long: "-4.316405243197185",
        ID: 63,
        Insurance_id: "C644"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.81743982506745",
        Home_location_long: "-4.265810686424869",
        ID: 64,
        Insurance_id: "P954"
      }, {
        Brand: "Trek",
        Home_location_lat: "55.99408538607025",
        Home_location_long: "-4.2636512146121985",
        ID: 65,
        Insurance_id: "M433"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.87150473749442",
        Home_location_long: "-4.300426488980775",
        ID: 66,
        Insurance_id: "P180"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.89268976704368",
        Home_location_long: "-4.31060591361572",
        ID: 67,
        Insurance_id: "T678"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.86838313945803",
        Home_location_long: "-4.284221801564672",
        ID: 68,
        Insurance_id: "K605"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.860892516557406",
        Home_location_long: "-4.29373842870428",
        ID: 69,
        Insurance_id: "S803"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.79770708600554",
        Home_location_long: "-4.235164521756381",
        ID: 70,
        Insurance_id: "G374"
      }, {
        Brand: "GT",
        Home_location_lat: "55.8845014412534",
        Home_location_long: "-4.3258533868597855",
        ID: 71,
        Insurance_id: "V878"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.82052945425316",
        Home_location_long: "-4.267622836219204",
        ID: 72,
        Insurance_id: "Z287"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.88084170296567",
        Home_location_long: "-4.257739732925081",
        ID: 73,
        Insurance_id: "G445"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.87144504435347",
        Home_location_long: "-4.285842259532571",
        ID: 74,
        Insurance_id: "X328"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.94636674546262",
        Home_location_long: "-4.313987321363176",
        ID: 75,
        Insurance_id: "X816"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.701632848718425",
        Home_location_long: "-4.256609064246051",
        ID: 76,
        Insurance_id: "H366"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.817912743678264",
        Home_location_long: "-4.249217625653314",
        ID: 77,
        Insurance_id: "J782"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.90677234732082",
        Home_location_long: "-4.285606339993039",
        ID: 78,
        Insurance_id: "J440"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.88878248186102",
        Home_location_long: "-4.3066705096965485",
        ID: 79,
        Insurance_id: "T618"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.941998226579805",
        Home_location_long: "-4.21928830001196",
        ID: 80,
        Insurance_id: "B521"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.87908019425711",
        Home_location_long: "-4.240747179174379",
        ID: 81,
        Insurance_id: "G491"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.88399579647711",
        Home_location_long: "-4.242287158486043",
        ID: 82,
        Insurance_id: "Z446"
      }, {
        Brand: "Giant",
        Home_location_lat: "55.86193812983087",
        Home_location_long: "-4.298098512248987",
        ID: 83,
        Insurance_id: "T376"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.91726071027019",
        Home_location_long: "-4.258722636575594",
        ID: 84,
        Insurance_id: "C840"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.706909010917315",
        Home_location_long: "-4.255364642211078",
        ID: 85,
        Insurance_id: "H540"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.79736461731727",
        Home_location_long: "-4.273140835838331",
        ID: 86,
        Insurance_id: "V925"
      }, {
        Brand: "GT",
        Home_location_lat: "55.85716189286591",
        Home_location_long: "-4.276627205100882",
        ID: 87,
        Insurance_id: "Z342"
      }, {
        Brand: "GT",
        Home_location_lat: "55.84078023420544",
        Home_location_long: "-4.335063876102841",
        ID: 88,
        Insurance_id: "I130"
      }, {
        Brand: "GT",
        Home_location_lat: "55.714557222759716",
        Home_location_long: "-4.30665322546142",
        ID: 89,
        Insurance_id: "G744"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.78636498601422",
        Home_location_long: "-4.259737210251517",
        ID: 90,
        Insurance_id: "I633"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.866936092762764",
        Home_location_long: "-4.289850256515417",
        ID: 91,
        Insurance_id: "V409"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.825662250027094",
        Home_location_long: "-4.261143258250328",
        ID: 92,
        Insurance_id: "N887"
      }, {
        Brand: "Pinarello",
        Home_location_lat: "55.9963731587239",
        Home_location_long: "-4.344012283890556",
        ID: 93,
        Insurance_id: "Z954"
      }, {
        Brand: "GT",
        Home_location_lat: "55.73528612037366",
        Home_location_long: "-4.2678112853777925",
        ID: 94,
        Insurance_id: "A821"
      }, {
        Brand: "Focus",
        Home_location_lat: "55.885722479777975",
        Home_location_long: "-4.276426854518",
        ID: 95,
        Insurance_id: "U977"
      }, {
        Brand: "Felt",
        Home_location_lat: "55.93044617267922",
        Home_location_long: "-4.269271321348947",
        ID: 96,
        Insurance_id: "Y242"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.89617236683213",
        Home_location_long: "-4.280858731138453",
        ID: 97,
        Insurance_id: "Y427"
      }, {
        Brand: "Specialized",
        Home_location_lat: "55.94313203246112",
        Home_location_long: "-4.266501369817965",
        ID: 98,
        Insurance_id: "P937"
      }, {
        Brand: "Raleigh",
        Home_location_lat: "55.989119143085865",
        Home_location_long: "-4.34451096082499",
        ID: 99,
        Insurance_id: "X768"
      }, {
        Brand: "Eddy Merchx",
        Home_location_lat: "55.854904209517585",
        Home_location_long: "-4.20965838544358",
        ID: 100,
        Insurance_id: "D958"
      }];
      var getPoints = new Array;
      for (var i = 0; i < bikes.length; i++) {
        var bikeloc = new google.maps.LatLng(bikes[i].Home_location_lat, bikes[i].Home_location_long);
        getPoints.push(bikeloc);
        var eachbike = bikes[i];
        //addMarker(eachbike, map);
      }
      console.log(getPoints);
      navigator.geolocation.getCurrentPosition(
        function (position) {
          const pos = {
            //lat: position.coords.latitude,
            //lng: position.coords.longitude,
            lat: 55.835,
            lng: -4.277
          };
          currentlocMarker(pos, map)
        },
        function (error) {
          //获取地理位置信息失败时所做的处理
        }, //以下是可选属性
        {
          enableHighAccuracy: true,//是否要求高精度的地理位置信息
          timeout: 1000,//对地理位置信息的获取操作做超时限制，如果再该事件内未获取到地理位置信息，将返回错误
          maximumAge: 60 * 1000//设置缓存有效时间，在该时间段内，获取的地理位置信息还是设置此时间段之前的那次获得的信息，超过这段时间缓存的位置信息会被废弃
        })

      function addMarker(location, map) {
        // Add the marker at the clicked location, and add the next-available label
        // from the array of alphabetical characters.
        var bikeloc = new google.maps.LatLng(eachbike.Home_location_lat, eachbike.Home_location_long);
        const marker = new google.maps.Marker({
          position: bikeloc,
          map: map,
          icon: 'bike2.png'
        });

        var infowindow = new google.maps.InfoWindow({
          content: 'ID: ' + String(eachbike.ID) + '<br>' +
            'Insurance: ' + String(eachbike.Insurance_id) + '<br>' +
            'Brand: ' + String(eachbike.Brand) + '<br>'
        });
        marker.addListener("click", () => {
          infowindow.open(map, marker);
          console.log('move')
        });
      }

      function currentlocMarker(pos, map) {
        map.setCenter(pos);
        const marker = new google.maps.Marker({
          position: pos,
          map: map,
        });

      }

      function traceroute(Coordinates, map) {
        fake_Coordinates = [];
        const flightPath = new google.maps.Polyline({
          path: fake_Coordinates,
          geodesic: true,
          strokeColor: "#ff3333",
          strokeOpacity: 0.6,//线条透明度[0,1]
          strokeWeight: 5,//线条宽度
        });
        flightPath.setMap(map);
        const marker_start = new google.maps.Marker({
          position: Coordinates[0],
          map: map,
          icon: 'http://www.google.com/mapfiles/dd-start.png'
        });

        const trace_marker = new google.maps.Marker({
          draggable: true,   //marker 设为可拖动
          animation: google.maps.Animation.DROP, //动画属性设为DROP
          icon: "bike2.png"
        });
        var refresh_time=200; //每更新一个点的时间间隔，单位毫秒
        for (let i = 0; i < Coordinates.length; i++) {
          setTimeout(function () {
            trace_marker.setMap(null);
            fake_Coordinates.push(Coordinates[i]);
            flightPath.setPath(fake_Coordinates)
            trace_marker.setPosition(Coordinates[i]);
            trace_marker.setMap(map);
            console.log(Coordinates[i]);
          }, refresh_time * (i + 1));
        }
        setTimeout(function () {
          const marker_end = new google.maps.Marker({
            position: Coordinates[Coordinates.length - 1],
            map: map,
            icon: 'http://www.google.com/mapfiles/dd-end.png'
          });
          trace_marker.setMap(null);
        }, refresh_time * (Coordinates.length + 1));


      }

      const flightPlanCoordinates = [
        {lat: 55.816293658188606, lng: -4.2885442276001},
        {lat: 55.816435315383465, lng: -4.288490583419802},
        {lat: 55.8165468323868, lng: -4.288404752731325},
        {lat: 55.816622181532516, lng: -4.288340379714968},
        {lat: 55.81667643282708, lng: -4.2882974643707295},
        {lat: 55.816736711954555, lng: -4.288227726936342},
        {lat: 55.81685124203948, lng: -4.288131167411806},
        {lat: 55.81695672997741, lng: -4.2880721588134785},
        {lat: 55.817080301198146, lng: -4.287980963706972},
        {lat: 55.81721592769601, lng: -4.287879039764406},
        {lat: 55.81733347027848, lng: -4.287825395584108},
        {lat: 55.81745101250588, lng: -4.287761022567751},
        {lat: 55.817607734923435, lng: -4.287691285133364},
        {lat: 55.817743359583, lng: -4.287610818862917},
        {lat: 55.81794830261616, lng: -4.2875357170105},
        {lat: 55.81813214765395, lng: -4.287514259338381},
        {lat: 55.81830092266163, lng: -4.287455250740053},
        {lat: 55.818438492302704, lng: -4.287454012755638},
        {lat: 55.81860425217238, lng: -4.287443283919578},
        {lat: 55.81878077763127, lng: -4.287420630726497},
        {lat: 55.81896461873586, lng: -4.287415266308467},
        {lat: 55.81914845897188, lng: -4.287420630726497},
        {lat: 55.8193533946046, lng: -4.287393808636348},
        {lat: 55.81951010936015, lng: -4.287387637922088},
        {lat: 55.81967586466473, lng: -4.287403731176178},
        {lat: 55.81982655069249, lng: -4.2873822735040585},
        {lat: 55.82000737315552, lng: -4.28735008699588},
        {lat: 55.82016107158837, lng: -4.287328629323761},
        {lat: 55.82033285147131, lng: -4.287296442815582},
        {lat: 55.82049558960821, lng: -4.287253527471344},
        {lat: 55.820664354364546, lng: -4.287226705381195},
        {lat: 55.82081805020215, lng: -4.287210612127105},
        {lat: 55.82096873180652, lng: -4.287167696782867},
        {lat: 55.82111639921261, lng: -4.287124781438629},
        {lat: 55.821294202080345, lng: -4.287081866094391},
        {lat: 55.821459949784604, lng: -4.287038950750152},
        {lat: 55.82162871035799, lng: -4.287006764241974},
        {lat: 55.82181253800675, lng: -4.286947755643646},
        {lat: 55.82202047315273, lng: -4.286904840299408},
        {lat: 55.822159095965986, lng: -4.286872653791229},
        {lat: 55.82230374533148, lng: -4.286824374028961},
        {lat: 55.822454421182, lng: -4.286781458684723},
        {lat: 55.82261112344748, lng: -4.2867600010126035},
        {lat: 55.822752757644416, lng: -4.286700992414276},
        {lat: 55.82292452608501, lng: -4.286641015915449},
        {lat: 55.82307821299429, lng: -4.28660882940727},
        {lat: 55.82324093964827, lng: -4.286544456390913},
        {lat: 55.8234337999864, lng: -4.286480083374555},
        {lat: 55.82365076672399, lng: -4.2864264391942575},
        {lat: 55.82378872656238, lng: -4.28637279501396},
        {lat: 55.823987610970235, lng: -4.28635670175987},
        {lat: 55.82416540071657, lng: -4.286313786415632},
        {lat: 55.82431606935706, lng: -4.286238684563215},
        {lat: 55.82449988430823, lng: -4.286185040382917},
        {lat: 55.824692738405346, lng: -4.28612066736656},
        {lat: 55.824843405003485, lng: -4.28610457411247},
        {lat: 55.82497900444289, lng: -4.286077752022321},
        {lat: 55.82511159010441, lng: -4.2860026501699044},
        {lat: 55.82528033483823, lng: -4.285922183899458},
        {lat: 55.825889458041395, lng: -4.2857022427602365},
        {lat: 55.82620283426952, lng: -4.285466208366926},
        {lat: 55.82667289387826, lng: -4.285165800957258},
        {lat: 55.82701036906874, lng: -4.284886851219709},
        {lat: 55.82738399890017, lng: -4.284543528465803},
        {lat: 55.82772089375342, lng: -4.282243251800537},
        {lat: 55.82839639718028, lng: -4.2813570641561105},
        {lat: 55.828667570816734, lng: -4.280938639549787},
        {lat: 55.828390371077965, lng: -4.280262722878034},
        {lat: 55.82813727393906, lng: -4.279640450386579},
        {lat: 55.828040855548196, lng: -4.279490246681745},
        {lat: 55.828221639835036, lng: -4.279157652763899},
        {lat: 55.827944436918294, lng: -4.278513922600324},
        {lat: 55.827745572739374, lng: -4.278149142174299},
        {lat: 55.82765517959465, lng: -4.277998938469465},
        {lat: 55.827528628839154, lng: -4.277795090584333},
        {lat: 55.827396051415626, lng: -4.2774624966664865},
        {lat: 55.8272273158594, lng: -4.276700749306257},
        {lat: 55.82697363697373, lng: -4.276975393295288},
        {lat: 55.82724561183482, lng: -4.276168633747202},
        {lat: 55.827402294801864, lng: -4.2755463612557465},
        {lat: 55.82749871477561, lng: -4.27496700410853},
        {lat: 55.827667449154546, lng: -4.274430562305551},
        {lat: 55.82768473649781, lng: -4.271643161773682},
        {lat: 55.82777592086876, lng: -4.270847131061655},
        {lat: 55.82773976366428, lng: -4.270181943225961},
        {lat: 55.827214689116296, lng: -4.268252849578857},
        {lat:55.82727163372594 ,lng:-4.268124626744367},
        {lat:55.82726410088013 ,lng:-4.268017338383771},
        {lat:55.82725054175399 ,lng:-4.267899321187116},
        {lat:55.827241502333955 ,lng:-4.267800079453565},
        {lat:55.827227943199894 ,lng:-4.26767133342085},
        {lat:55.827206851204245 ,lng:-4.26755599843321},
        {lat:55.82718425262478 ,lng:-4.267408476937391},
        {lat:55.827167680324855 ,lng:-4.26729314194975},
        {lat:55.82714809487035 ,lng:-4.26716707812605},
        {lat:55.82713026768832 ,lng:-4.267065602307962},
        {lat:55.827107669064354 ,lng:-4.266955631738352},
        {lat:55.82708808357963 ,lng:-4.26687248325889},
        {lat:55.827076030968755 ,lng:-4.266794699197458},
        {lat:55.827122734815106 ,lng:-4.266727643972086},
        {lat:55.827158892593154 ,lng:-4.266628402238535},
        {lat:55.82720107662502 ,lng:-4.266566711431192},
        {lat:55.8272583263094 ,lng:-4.2664862451607455},
        {lat:55.82731557590954 ,lng:-4.2663870034271945},
        {lat:55.82736529259915 ,lng:-4.266287761693643},
        {lat:55.82742254204186 ,lng:-4.266204613214182},
        {lat:55.82749184388605 ,lng:-4.266100007062601},
        {lat:55.82752348164344 ,lng:-4.266008811956095},
        {lat:55.82754909314249 ,lng:-4.265890794759439},
        {lat:55.82766201305137 ,lng:-4.2657994718277825},
        {lat:55.82776897823103 ,lng:-4.265719005557336},
        {lat:55.8278367729109 ,lng:-4.265673408004083},
        {lat:55.82789251511474 ,lng:-4.265609034987725},
        {lat:55.8279708553743 ,lng:-4.265555390807427},
        {lat:55.82804316932 ,lng:-4.265482971164025},
        {lat:55.828103430838716 ,lng:-4.265402504893578},
        {lat:55.82817273146983 ,lng:-4.265340814086236},
        {lat:55.828240525446 ,lng:-4.265284487696923},
        {lat:55.82829777360054 ,lng:-4.265214750262536},
        {lat:55.828370086938456 ,lng:-4.265134283992089},
        {lat:55.82847855669328 ,lng:-4.265016266795434},
        {lat:55.828564428368004 ,lng:-4.264922389479913},
        {lat:55.828638247726275 ,lng:-4.264823147746362},
        {lat:55.82871959950991 ,lng:-4.264769503566064},
        {lat:55.82882053574564 ,lng:-4.264595159980096},
        {lat:55.828903393653846 ,lng:-4.264503964873589},
        {lat:55.828989264390614 ,lng:-4.264410087558068},
        {lat:55.82907664143699 ,lng:-4.264329621287621},
        {lat:55.82917456375569 ,lng:-4.26423037955407},
        {lat:55.82923633001453 ,lng:-4.264160642119683},
        {lat:55.82931316107766 ,lng:-4.264082858058251},
        {lat:55.82937944657881 ,lng:-4.264042624923028},
        {lat:55.82945175790576 ,lng:-4.263964840861596},
        {lat:55.8295346144693 ,lng:-4.263897785636224},
        {lat:55.82961144494324 ,lng:-4.263833412619866},
        {lat:55.82970801263518 ,lng:-4.263775725058278},
        {lat:55.82976977804689 ,lng:-4.26372744529601},
        {lat:55.829837569239544 ,lng:-4.263671118906697},
        {lat:55.829936996108344 ,lng:-4.263614792517385},
        {lat:55.83006214691321 ,lng:-4.263558262538747},
        {lat:55.83016759903581 ,lng:-4.263467067432241},
        {lat:55.83030920572211 ,lng:-4.263408058833913},
        {lat:55.83045683767593 ,lng:-4.263322228145436},
        {lat:55.83061350770789 ,lng:-4.263257855129079},
        {lat:55.83079428003748 ,lng:-4.263214939784841},
        {lat:55.830969025824096 ,lng:-4.263113015842275},
        {lat:55.831161847849906 ,lng:-4.263086193752126},
        {lat:55.831504122176284 ,lng:-4.26306544089885},
        {lat:55.83187168328014 ,lng:-4.263162000423386},
        {lat:55.83221513887698 ,lng:-4.263365848308518},
        {lat:55.83252243868211 ,lng:-4.263687713390305},
        {lat:55.83276948186283 ,lng:-4.263945205455735},
        {lat:55.83293819337712 ,lng:-4.264277799373581},
        {lat:55.83314908174076 ,lng:-4.264685495143845},
        {lat:55.83329369024345 ,lng:-4.265179021602585},
        {lat:55.833426247565214 ,lng:-4.265651090389206},
        {lat:55.83348650074394 ,lng:-4.265844209438279},
        {lat:55.833583674192006 ,lng:-4.2662733628806615},
        {lat:55.83364995241516 ,lng:-4.266713245159104},
        {lat:55.833728281078685 ,lng:-4.267174585109665},
        {lat:55.83381263484762 ,lng:-4.267453534847214},
        {lat:55.833860836919136 ,lng:-4.267753942256882},
        {lat:55.83420427494933 ,lng:-4.267664074377723},
        {lat:55.834361288695064 ,lng:-4.267599005662787},
        {lat:55.834520955575464 ,lng:-4.267550725900519},
        {lat:55.83466857154204 ,lng:-4.267470259630072},
        {lat:55.834677609236095 ,lng:-4.267346878015387},
        {lat:55.834635433312606 ,lng:-4.2670679282778385},
        {lat:55.834614345333726 ,lng:-4.266826529466498},
        {lat:55.83458421962977 ,lng:-4.266585130655158},
        {lat:55.834569156769014 ,lng:-4.266322274171698},
        {lat:55.83452698072792 ,lng:-4.265930671655524},
        {lat:55.834412420387096 ,lng:-4.26618754863739},
        {lat:55.83451794299888 ,lng:-4.265957493745673},
        {lat:55.83450890526774 ,lng:-4.26577510353266},
        {lat:55.83451191784501 ,lng:-4.265587348901618},
        {lat:55.83456011904979 ,lng:-4.265458602868903},
        {lat:55.83473183535619 ,lng:-4.265463967286933},
        {lat:55.834882463070855 ,lng:-4.265458602868903},
        {lat:55.83490957599755 ,lng:-4.265748281442511},
        {lat:55.83499392720409 ,lng:-4.266118426286567},
        {lat:55.83509032835897 ,lng:-4.266617317163337},
        {lat:55.83516262906832 ,lng:-4.266933817827094},
        {lat:55.83522890460044 ,lng:-4.267180581056464},
        {lat:55.83527710491649 ,lng:-4.267448801957953},
        {lat:55.83531928014403 ,lng:-4.267690200769294},
        {lat:55.83534036774065 ,lng:-4.267963786088813},
        {lat:55.83537350536936 ,lng:-4.268221278154242},
        {lat:55.83540965547759 ,lng:-4.268462676965583},
        {lat:55.83544768552645 ,lng:-4.268811364137519},
        {lat:55.835516973072174 ,lng:-4.269101042711127},
        {lat:55.8356013229612 ,lng:-4.2693156194323185},
        {lat:55.8357067600652 ,lng:-4.26953019615351},
        {lat:55.83574592234529 ,lng:-4.269621391260016},
        {lat:55.83597788273413 ,lng:-4.26928343292414},
        {lat:55.83610139354547 ,lng:-4.269084949457038},
        {lat:55.83617971727133 ,lng:-4.268929381334174},
        {lat:55.83632130206778 ,lng:-4.268709440194953},
        {lat:55.83644782421562 ,lng:-4.268505592309821},
        {lat:55.836587511056514 ,lng:-4.268338160301883},
        {lat:55.83672608196261 ,lng:-4.268241600777347},
        {lat:55.83682549122148 ,lng:-4.268086032654483},
        {lat:55.83696104889216 ,lng:-4.267887549187381},
        {lat:55.8372123965151 ,lng:-4.267697443422551},
        {lat:55.83735096519432 ,lng:-4.267557968553777},
        {lat:55.83749555807222 ,lng:-4.267354120668645},
        {lat:55.83764918741587 ,lng:-4.267187823709722},
        {lat:55.837844988640676 ,lng:-4.267042984422917},
        {lat:55.837959456592344 ,lng:-4.266833772119756},
        {lat:55.838079948808975 ,lng:-4.26673721259522},
        {lat:55.8381281455911 ,lng:-4.266935696062322},
        {lat:55.838149231664474 ,lng:-4.267128815111394},
        {lat:55.838206465234585 ,lng:-4.267402400430913},
        {lat:55.838278760150104 ,lng:-4.267949571069951},
        {lat:55.83819864644212 ,lng:-4.268631033914305},
        {lat:55.838168523514916 ,lng:-4.268877797143675},
        {lat:55.83812032678287 ,lng:-4.269188933389403},
        {lat:55.838090203795 ,lng:-4.269424967782713},
        {lat:55.83804803157276 ,lng:-4.269779019372679},
        {lat:55.837987785461664 ,lng:-4.269950680749632},
        {lat:55.83796971161012 ,lng:-4.270240359323241},
        {lat:55.83793958850557 ,lng:-4.270369105355956},
        {lat:55.837921514631645 ,lng:-4.270605139749266},
        {lat:55.837909465377685 ,lng:-4.2708948183228745},
        {lat:55.837861268324524 ,lng:-4.271173768060423},
        {lat:55.83781909585397 ,lng:-4.2714956331422105},
        {lat:55.83778294798569 ,lng:-4.2716458368470445},
        {lat:55.83772872612024 ,lng:-4.271785311715819},
        {lat:55.837740775430206 ,lng:-4.271978430764891},
        {lat:55.837764874038946 ,lng:-4.272225193994261},
        {lat:55.83778294798569 ,lng:-4.2728473042500115},
        {lat:55.83791549000512 ,lng:-4.273308644200573},
        {lat:55.837993810076966 ,lng:-4.273555407429943},
        {lat:55.83812032678287 ,lng:-4.273780712987194},
        {lat:55.83831913791753 ,lng:-4.274102578068981},
        {lat:55.83863843852159 ,lng:-4.274649748708019},
        {lat:55.83817495685926 ,lng:-4.274561405181885},
        {lat:55.83904207892891 ,lng:-4.27544689339294},
        {lat:55.839127927281126 ,lng:-4.275615872560878},
        {lat:55.83922130597536 ,lng:-4.275833131491084},
        {lat:55.83929209290053 ,lng:-4.276004792868037},
        {lat:55.83939300169875 ,lng:-4.276163043199916},
        {lat:55.8394878858522 ,lng:-4.276361526667018},
        {lat:55.83959815726039 ,lng:-4.27657738518224},
        {lat:55.83965990696551 ,lng:-4.27670881342397},
        {lat:55.83975930872385 ,lng:-4.276912661309102},
        {lat:55.83986624063465 ,lng:-4.277121873612264},
        {lat:55.83991816981289 ,lng:-4.277257270693131},
        {lat:55.83998594331639 ,lng:-4.27739942777092},
        {lat:55.840232939084885 ,lng:-4.277337736963577},
        {lat:55.84031125448872 ,lng:-4.2773109148734285},
        {lat:55.840546199753696 ,lng:-4.277214355348892},
        {lat:55.840741076606605 ,lng:-4.277117795824356},
        {lat:55.84083294538283 ,lng:-4.277080244898148},
        {lat:55.84095192265566 ,lng:-4.277048058389969},
        {lat:55.841258462026985 ,lng:-4.27690674066073},
        {lat:55.84150996776411 ,lng:-4.276810181136194},
        {lat:55.84171930363394 ,lng:-4.2767055749846135},
        {lat:55.841857856251636 ,lng:-4.27665997743136},
        {lat:55.842145928551155 ,lng:-4.276532547011285},
        {lat:55.84242453623397 ,lng:-4.276406483187585},
        {lat:55.84251640103221 ,lng:-4.2763635678433465},
        {lat:55.842705692449876 ,lng:-4.276261643900781},
        {lat:55.842811110290015 ,lng:-4.2762375040196465},
        {lat:55.84288038471506 ,lng:-4.276207999720483},
        {lat:55.843091745195586 ,lng:-4.276124851241021},
        {lat:55.84322426911809 ,lng:-4.276057796015649},
        {lat:55.84336884015471 ,lng:-4.276004151835351},
        {lat:55.843570636327655 ,lng:-4.2759049101018},
        {lat:55.843751681502646 ,lng:-4.275843219294457},
        {lat:55.843879685398626 ,lng:-4.275794939532189},
        {lat:55.84413719784184 ,lng:-4.275684968962579},
        {lat:55.84441127353902 ,lng:-4.275572316183953},
        {lat:55.84459800532484 ,lng:-4.275497214331536},
        {lat:55.84470204871234 ,lng:-4.275248050689697},



      ];

      traceroute(flightPlanCoordinates, map);

      var heatmap = new google.maps.visualization.HeatmapLayer({
        data: getPoints,
        //map: map,
      });

      //toggleHeatmap();

      function toggleHeatmap() {
        //heatmap.setMap(heatmap.getMap() ? null : map);
      }

      //changeGradient()//修改梯度配色方案
      function changeGradient() {
        const gradient = [
          "rgba(0, 255, 255, 0)",
          "rgba(0, 255, 255, 1)",
          "rgba(0, 191, 255, 1)",
          "rgba(0, 127, 255, 1)",
          "rgba(0, 63, 255, 1)",
          "rgba(0, 0, 255, 1)",
          "rgba(0, 0, 223, 1)",
          "rgba(0, 0, 191, 1)",
          "rgba(0, 0, 159, 1)",
          "rgba(0, 0, 127, 1)",
          "rgba(63, 0, 91, 1)",
          "rgba(127, 0, 63, 1)",
          "rgba(191, 0, 31, 1)",
          "rgba(255, 0, 0, 1)",
        ];
        heatmap.set("gradient", heatmap.get("gradient") ? null : gradient);
      }

      changeRadius()//修改半径
      function changeRadius() {
        heatmap.set("radius", heatmap.get("radius") ? null : 30);
      }

      //changeOpacity()//修改不透明度
      function changeOpacity() {
        heatmap.set("opacity", heatmap.get("opacity") ? null : 0.2);
      }


    }

    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head>

<body>
<div id="googleMap" style="width:1000px;height:560px;"></div>
</body>
</html>
